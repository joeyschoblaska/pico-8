-- lander
-- by thrillhouse

pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
#include lander/player.p8
#include lander/ground.p8

function _init()
  game_over = false
  win = false
  g = 0.025 -- gravity
  star_rand = rnd(128)

  make_player()
  make_ground()
end

function _update()
  if (not game_over) then
    move_player()
    check_land()
  else
    if (btnp(5)) _init()
  end
end

function _draw()
  cls()

  draw_stars()
  draw_ground()
  draw_player()

  if (game_over) then
    if (win) then
      print("nice landing!", 40, 38, 11)
    else
      print("ouch", 57, 38, 8)
    end

    print("press ‚ùé to play again", 22, 60, 5)
  end
end

function rndb(low, high)
  return flr(rnd(high - low + 1) + low)
end

function draw_stars()
  srand(star_rand)

  for i = 1, 50 do
    pset(rndb(0, 127), rndb(0, 127), rndb(5, 7))
  end

  srand(time())
end

function end_game(won)
  game_over = true
  win = won

  if (win) then
    sfx(1)
  else
    sfx(2)
  end
end
__gfx__
0000000000700700762dddddddddd766000000000088880000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000770007666666666666666000000000899998000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070003b3b3b0007666666666660000000000899aa99800000000000000000000000000000000000000000000000000000000000000000000000000000000
000770003b66663b0000000000000000000b600089aaaa9800000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700003b3b3b0000000000000000000bb600089aaaa9800000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000300b0000000000000000000bbb6000899aa99800000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000b003000000000000000000000060000899998000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000b300b300000000000000000000060000088880000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000600001365000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000c00001e0701e0301b0701b03014070140301e0701e030000001b0701e0701e0300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000400003f66039660346602e6602965025650216401d6401963015630126300e6200c62009620066100461002610016100061000000000000000000000000000000000000000000000000000000000000000000
